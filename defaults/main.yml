#SPDX-License-Identifier: MIT-0
---
# defaults file for traefik

traefik_version: "3.1.7"
traefik_architecture: "{{ 'amd64' if ansible_architecture == 'x86_64' else 'arm64' if ansible_architecture == 'aarch64' else ansible_architecture }}"
traefik_user: "traefik"
traefik_group: "traefik"
traefik_home_dir: "/opt/traefik"
traefik_config_dir: "/etc/traefik"
traefik_data_dir: "/var/lib/traefik"
traefik_log_dir: "/var/log/traefik"
traefik_binary_path: "/usr/local/bin/traefik"
traefik_service_enabled: true
traefik_service_state: "started"

# Traefik configuration options
traefik_global_send_anonymous_usage: false
traefik_global_check_new_version: true

traefik_log_level: "WARN"

traefik_api_dashboard: true
traefik_api_insecure: true

# EntryPoints
traefik_entrypoint_web_enabled: true
traefik_entrypoint_web_port: 80
traefik_entrypoint_websecure_enabled: true
traefik_entrypoint_websecure_port: 443

# Providers
traefik_provider_docker_enabled: true
traefik_provider_docker_exposed_by_default: false
traefik_provider_docker_watch: true
traefik_provider_docker_endpoint: "unix:///var/run/docker.sock"

traefik_provider_file_enabled: true
traefik_provider_file_directory: "/etc/traefik/conf/"
traefik_provider_file_watch: true

# Certificate Resolvers
traefik_certificate_resolvers_enabled: true
traefik_certificate_resolvers:
  cloudflare:
    email: "email@example.com"
    storage: "/certs/acme.json"
    ca_server: "https://acme-v02.api.letsencrypt.org/directory"
    dns_challenge:
      provider: "cloudflare"
      resolvers:
        - "1.1.1.1:53"
        - "8.8.8.8:53"
